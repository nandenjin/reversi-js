var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var c=function(){};c.prototype=a;return new c};
$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},c={};try{return c.__proto__=a,c.a}catch(b){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,c){a.__proto__=c;if(a.__proto__!==c)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,c){a.prototype=$jscomp.objectCreate(c.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;b(a,c)}else for(b in c)if("prototype"!=b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(c,b);f&&Object.defineProperty(a,b,f)}else a[b]=c[b];a.superClass_=c.prototype};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,b=[];!(c=a.next()).done;)b.push(c.value);return b};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.polyfill=function(a,c,b,f){if(c){b=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var g=a[f];g in b||(b[g]={});b=b[g]}a=a[a.length-1];f=b[a];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var g=c.length;b=b||0;for(0>b&&(b=Math.max(b+g,0));b<g;b++){var d=c[b];if(d===a||Object.is(d,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
(function(a,c){"object"===typeof exports&&"undefined"!==typeof module?c(exports):"function"===typeof define&&define.amd?define(["exports"],c):c(a.reversi={})})(this,function(a){var c=function(d,a){this.x=d;this.y=a};c.prototype.clone=function(){return new c(this.x,this.y)};c.prototype.copy=function(a){this.x=a.x;this.y=a.y;return this};c.prototype.set=function(a,e){this.x=a;this.y=e;return this};c.prototype.shift=function(a,e){this.x+=a;this.y+=e;return this};c.prototype.isEqualTo=function(a){return this.x===
a.x&&this.y===a.y};var b=function(a,e,c){this.width=a;this.height=e;this.data=[];for(c=0;c<e;c++){this.data[c]=[];for(var d=0;d<a;d++)this.data[c][d]=0}this._listeners={}};b.prototype.clone=function(){return(new b(this.width,this.height)).copy(this)};b.prototype.copy=function(a,e){e=e||new c(0,0);var d=a.width,b=a.height,l=e.x;e=e.y;for(var k=0;k<b;k++)for(var f=0;f<d;f++)this.setPiece(new c(l+f,e+k),a.getPiece(new c(f,k)));return this};b.prototype.loadArray=function(a){var d=this;a.forEach(function(a,
c){return d.data[Math.floor(c/d.width)][c%d.width]=a});return this};b.prototype.getCellCursors=function(){for(var a=[],e=0;e<this.height;e++)for(var b=0;b<this.width;b++)a.push(new c(b,e));return a};b.prototype.contains=function(a){return 0<=a.x&&a.x<this.width&&0<=a.y&&a.y<this.height};b.prototype.clear=function(){for(var a=0;a<h;a++)for(var c=0;c<w;c++)this.data[a][c]=0;return this};b.prototype.setPiece=function(a,c){this.data[a.y][a.x]=c;this.emit("change",a);return this};b.prototype.getPiece=
function(a){return this.data[a.y][a.x]};b.prototype.putPiece=function(a,c,b){var d=this;b=b||{};b=b.dryRun;var e=this.constructor.colors;[e.BLACK,e.WHITE].includes(c)||console.warn("Board.getPiece: color must be Board.colors.BLACK or Board.colors.WHITE.");if(this.getPiece(a)!==e.EMPTY)return null;var p=c===e.BLACK?e.WHITE:e.BLACK,f=[];[[0,1],[1,0],[1,1],[-1,0],[0,-1],[-1,-1],[-1,1],[1,-1]].forEach(function(b){var n=b[0];b=b[1];for(var l=a.clone().shift(n,b),k=[];d.contains(l);){var g=d.getPiece(l);
if(g==c){f.push.apply(f,k);break}else if(g==p)k.push(l.clone());else if(g==e.EMPTY)break;l.shift(n,b)}});if(0===f.length)return null;b||(this.setPiece(a,c),f.forEach(function(a){return d.setPiece(a,c)}),this.emit("put",a,f));return f};b.prototype.on=function(a,c){this._listeners[a]=this._listeners[a]||[];this._listeners[a].push(c);return this};b.prototype.emit=function(a,c){for(var b=[],d=1;d<arguments.length;++d)b[d-1]=arguments[d];if(!this._listeners[a])return this;this._listeners[a].forEach(function(a){return a.apply(null,
$jscomp.arrayFromIterable(b))});return this};$jscomp.global.Object.defineProperties(b,{colors:{configurable:!0,enumerable:!0,get:function(){return{EMPTY:0,BLACK:1,WHITE:2}}}});var f=function(a,c){var b=this;this._listeners={};this.board=a;a.on("change",function(a){return b.update([a])})};f.prototype.update=function(a){a&&0!==a.length||this.board.getCellCursors();return this};f.prototype.on=function(a,c){this._listeners[a]=this._listeners[a]||[];this._listeners[a].push(c);return this};f.prototype.emit=
function(a,c){for(var b=[],d=1;d<arguments.length;++d)b[d-1]=arguments[d];if(!this._listeners[a])return this;this._listeners[a].forEach(function(a){return a.apply(null,$jscomp.arrayFromIterable(b))});return this};var g=function(a,b){var d=f.call(this,a,b)||this;b=b||{};d.clickable=b.clickable||!1;d.role=b.role||null;b=a.width;var e=a.height;d._listeners={};var l=document.createElement("div");l.classList.add("reversi-board");l.style.cssText="display: grid; grid-template-columns: repeat("+b+", 1fr); grid-template-rows: repeat("+
e+", 1fr);";d.cells=[];for(var k=0;k<e;k++){d.cells[k]=[];for(var g=0;g<b;g++){var m=document.createElement("div");m.classList.add("reversi-board__cell");m.style.cssText="grid-column: "+(g+1)+"; grid-row: "+(k+1);m.addEventListener("click",function(a,b){return function(e){return d._onClicked(new c(a,b),d.role)}}(g,k));l.appendChild(m);d.cells[k].push(m)}}d.domElement=l;a.on("put",function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return d._onPut.apply(d,$jscomp.arrayFromIterable(b))});
d.update();return d};$jscomp.inherits(g,f);g.prototype.update=function(a){var b=this;f.prototype.update.call(this,a);a&&0!==a.length||(a=this.board.getCellCursors());var c=this.board,d=c.constructor.colors;a.forEach(function(a){var e=b.cells[a.y][a.x];e.classList.remove("reversi-board__cell--black","reversi-board__cell--white");a=c.getPiece(a);a==d.BLACK&&e.classList.add("reversi-board__cell--black");a==d.WHITE&&e.classList.add("reversi-board__cell--white")});return this};g.prototype.setRole=function(a){this.role=
a;return this};g.prototype.on=function(a,b){this._listeners[a]=this._listeners[a]||[];this._listeners[a].push(b);return this};g.prototype.emit=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(!this._listeners[a])return this;this._listeners[a].forEach(function(a){return a.apply(null,$jscomp.arrayFromIterable(c))});return this};g.prototype._onClicked=function(a,b){if(!this.clickable||void 0===b||null===b)return null;(b=this.board.putPiece(a,b))&&this.emit("click",a);return b};
g.prototype._onPut=function(a,b){var c=this.cells;this.board.getCellCursors().forEach(function(d){var e=c[d.y][d.x];e.classList.remove("reversi-board__cell--last-put");e.classList.remove("reversi-board__cell--last-affected");d.isEqualTo(a)&&e.classList.add("reversi-board__cell--last-put");b.some(function(a){return d.isEqualTo(a)})&&e.classList.add("reversi-board__cell--last-affected")})};a.Cursor=c;a.Board=b;a.Renderer=f;a.HTMLRenderer=g;Object.defineProperty(a,"__esModule",{value:!0})});
