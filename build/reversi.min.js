var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var c=function(){};c.prototype=a;return new c};
$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},c={};try{return c.__proto__=a,c.a}catch(b){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,c){a.__proto__=c;if(a.__proto__!==c)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,c){a.prototype=$jscomp.objectCreate(c.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;b(a,c)}else for(b in c)if("prototype"!=b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(c,b);e&&Object.defineProperty(a,b,e)}else a[b]=c[b];a.superClass_=c.prototype};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,b=[];!(c=a.next()).done;)b.push(c.value);return b};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in b||(b[f]={});b=b[f]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var f=c.length;b=b||0;for(0>b&&(b=Math.max(b+f,0));b<f;b++){var d=c[b];if(d===a||Object.is(d,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
(function(a,c){"object"===typeof exports&&"undefined"!==typeof module?c(exports):"function"===typeof define&&define.amd?define(["exports"],c):c(a.reversi={})})(this,function(a){var c=function(a,c){this.x=a;this.y=c};c.prototype.clone=function(){return new c(this.x,this.y)};c.prototype.copy=function(a){this.x=a.x;this.y=a.y;return this};c.prototype.set=function(a,c){this.x=a;this.y=c;return this};c.prototype.shift=function(a,c){this.x+=a;this.y+=c;return this};c.prototype.isEqualTo=function(a){return this.x===
a.x&&this.y===a.y};var b=function(a,c,b){this.width=a;this.height=c;this.data=[];for(b=0;b<c;b++){this.data[b]=[];for(var d=0;d<a;d++)this.data[b][d]=0}this._listeners={}};b.prototype.clone=function(){return(new b(this.width,this.height)).copy(this)};b.prototype.copy=function(a,b){b=b||new c(0,0);var d=a.width,l=a.height,g=b.x;b=b.y;for(var k=0;k<l;k++)for(var e=0;e<d;e++)this.setPiece(new c(g+e,b+k),a.getPiece(new c(e,k)));return this};b.prototype.loadArray=function(a){var d=this;a.forEach(function(a,
c){return d.data[Math.floor(c/d.width)][c%d.width]=a});return this};b.prototype.getCellCursors=function(){for(var a=[],b=0;b<this.height;b++)for(var m=0;m<this.width;m++)a.push(new c(m,b));return a};b.prototype.contains=function(a){return 0<=a.x&&a.x<this.width&&0<=a.y&&a.y<this.height};b.prototype.clear=function(){for(var a=0;a<h;a++)for(var c=0;c<w;c++)this.data[a][c]=0;return this};b.prototype.setPiece=function(a,c){this.data[a.y][a.x]=c;this.emit("change",a);return this};b.prototype.getPiece=
function(a){return this.data[a.y][a.x]};b.prototype.putPiece=function(a,c,b){var d=this;b=b||{};b=b.dryRun;var g=this.constructor.colors;[g.BLACK,g.WHITE].includes(c)||console.warn("Board.getPiece: color must be Board.colors.BLACK or Board.colors.WHITE.");if(this.getPiece(a)!==g.EMPTY)return null;var m=c===g.BLACK?g.WHITE:g.BLACK,l=[];[[0,1],[1,0],[1,1],[-1,0],[0,-1],[-1,-1],[-1,1],[1,-1]].forEach(function(b){var e=b[0];b=b[1];for(var p=a.clone().shift(e,b),k=[];d.contains(p);){var f=d.getPiece(p);
if(f==c){l.push.apply(l,k);break}else if(f==m)k.push(p.clone());else if(f==g.EMPTY)break;p.shift(e,b)}});if(0===l.length)return null;b||(this.setPiece(a,c),l.forEach(function(a){return d.setPiece(a,c)}),this.emit("put",a,l));return l};b.prototype.on=function(a,c){this._listeners[a]=this._listeners[a]||[];this._listeners[a].push(c);return this};b.prototype.emit=function(a,c){for(var b=[],d=1;d<arguments.length;++d)b[d-1]=arguments[d];if(!this._listeners[a])return this;this._listeners[a].forEach(function(a){return a.apply(null,
$jscomp.arrayFromIterable(b))});return this};$jscomp.global.Object.defineProperties(b,{colors:{configurable:!0,enumerable:!0,get:function(){return{EMPTY:0,BLACK:1,WHITE:2}}}});var e=function(a,c){var b=this;this._listeners={};this.board=a;a.on("change",function(a){return b.update([a])})};e.prototype.update=function(a){a&&0!==a.length||this.board.getCellCursors();return this};e.prototype.on=function(a,b){this._listeners[a]=this._listeners[a]||[];this._listeners[a].push(b);return this};e.prototype.emit=
function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(!this._listeners[a])return this;this._listeners[a].forEach(function(a){return a.apply(null,$jscomp.arrayFromIterable(c))});return this};var f=function(a,b){var d=e.call(this,a,b)||this;b=b||{};d.clickable=b.clickable||!1;d.role=b.role||null;b=a.width;var f=a.height,g=document.createElement("div");g.classList.add("reversi-board");g.style.cssText="display: grid; grid-template-columns: repeat("+b+", 1fr); grid-template-rows: repeat("+
f+", 1fr);";d.cells=[];for(var k=0;k<f;k++){d.cells[k]=[];for(var l=0;l<b;l++){var n=document.createElement("div");n.classList.add("reversi-board__cell");n.style.cssText="grid-column: "+(l+1)+"; grid-row: "+(k+1);n.addEventListener("click",function(a,b){return function(e){return d._onClicked(new c(a,b),d.role)}}(l,k));g.appendChild(n);d.cells[k].push(n)}}d.domElement=g;a.on("put",function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return d._onPut.apply(d,$jscomp.arrayFromIterable(b))});
d.update();return d};$jscomp.inherits(f,e);f.prototype.update=function(a){var b=this;e.prototype.update.call(this,a);a&&0!==a.length||(a=this.board.getCellCursors());var c=this.board,d=c.constructor.colors;a.forEach(function(a){var e=b.cells[a.y][a.x];e.classList.remove("reversi-board__cell--black","reversi-board__cell--white");a=c.getPiece(a);a==d.BLACK&&e.classList.add("reversi-board__cell--black");a==d.WHITE&&e.classList.add("reversi-board__cell--white")});return this};f.prototype.setRole=function(a){this.role=
a;return this};f.prototype._onClicked=function(a,b){this.emit("click",a);return this.clickable&&void 0!==b&&null!==b?this.board.putPiece(a,b):this};f.prototype._onPut=function(a,b){var c=this.cells;this.board.getCellCursors().forEach(function(d){var e=c[d.y][d.x];e.classList.remove("reversi-board__cell--last-put");e.classList.remove("reversi-board__cell--last-affected");d.isEqualTo(a)&&e.classList.add("reversi-board__cell--last-put");b.some(function(a){return d.isEqualTo(a)})&&e.classList.add("reversi-board__cell--last-affected")})};
a.Cursor=c;a.Board=b;a.Renderer=e;a.HTMLRenderer=f;Object.defineProperty(a,"__esModule",{value:!0})});
